# å‰ç«¯å·¥ç¨‹åŒ–â€”â€”ç¢ç‰‡é›†
å¤§å“¥ç¦»èŒåï¼Œæˆ‘åœ¨æ¥æ”¶é¡¹ç›®çš„æ—¶å€™ï¼Œå‘ç°æˆ‘å¯¹å‰ç«¯å·¥ç¨‹åŒ–çš„è®¤è¯†è¿˜ååˆ†çš„æµ…è–„ï¼Œç‰¹æ­¤è®°å½•æˆ‘åœ¨è¯¥é¡¹ç›®ä¸­å­¦ä¹ åˆ°çš„å·¥ç¨‹åŒ–çŸ¥è¯†ã€‚
## husky
> Husky improves your commits and more ğŸ¶ woof!

npmä¸Šhuskyçš„ä»‹ç»ç›¸å½“çš„è€å¤–ï¼Œä¹Ÿç¡®å®å½¢è±¡ã€‚npmä¸Š800wçš„å‘¨ä¸‹è½½é‡ä¹Ÿè¯´æ˜äº†è¿™ä¸ªåŒ…çš„æµè¡Œã€‚

ä»ä»‹ç»ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªåŒ…çš„ä½œç”¨æ˜¯è§„èŒƒcommitã€‚

è¿™æ—¶å€™å¿…é¡»è¦å¼•å…¥ä¸€ä¸‹githooksäº†ã€‚æˆ‘é¦–æ¬¡æ¥è§¦hookæ˜¯åœ¨å­¦ä¹ reactçš„æ—¶å€™ï¼Œå‡½æ•°ç»„ä»¶æä¾›äº†å¤šä¸ªhookæ¥ä»‹å…¥å‡½æ•°çš„æ›´æ–°æµç¨‹ï¼ŒäºŒæ¬¡è§åˆ°hookæ˜¯åœ¨å­¦ä¹ è®¾è®¡æ¨¡å¼çš„æ—¶å€™ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸­ã€‚æ¨¡æ¿æ–¹æ³•ä¸­ï¼Œç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥æŠ½è±¡å‡ºå˜åŒ–çš„éƒ¨åˆ†ï¼Œç”¨é’©å­å‡½æ•°æ¥æ§åˆ¶ç¨‹åºçš„èµ°å‘ã€‚è€Œè¿™ä¸ªgithooksï¼Œå°±æ˜¯åœ¨ç‰¹å®šè¡Œä¸ºå‰æš´éœ²ç»™å¤–ç•Œå¯ä»¥æ‰§è¡Œçš„å‡½æ•°ã€‚

ä½¿ç”¨æ–¹æ³•æŒ‰ç…§npmçš„æŒ‡å¯¼å³å¯ï¼š
```bash
npm set-script prepare "husky install"
npm run prepare
```
å°†huskyå†™å…¥scriptå‘½ä»¤ä¸­ã€‚å…¶å®è¿™ç§å†™æ³•ç›´æ¥`npx husky install`ä¹Ÿå¯ä»¥ã€‚

å…¶å®åˆ°è¿™é‡Œï¼Œhuskyçš„å·¥ä½œå°±ç»“æŸäº†ï¼Œä¸‹é¢å°±éƒ½æ˜¯åŠŸèƒ½å‘çš„åŒ…çš„å·¥ä½œäº†ã€‚æ¯”å¦‚commitlintã€‚ä½¿ç”¨huskyå¢åŠ é’©å­çš„æ–¹æ³•æ˜¯ï¼š
```bash
npx husky add .husky/commit-msg  'npx --no -- commitlint --edit ${1}'
```
addåé¢æ˜¯è·¯å¾„å‚æ•°ï¼Œè‡³äºåé¢çš„å‚æ•°æ˜¯å•¥ï¼Œä¸çŸ¥é“ã€‚
### commitlint
è¿™ä¸ªä¸œè¥¿æ˜¯å¯¹commit messageçš„æ ¼å¼è¿›è¡Œé™åˆ¶çš„åŒ…ï¼Œæ®è¯´ä¸šç•Œcommitä¿¡æ¯æœ€è§„èŒƒçš„æ˜¯angularçš„å›¢é˜Ÿï¼Œä»–ä»¬å°†commitåˆ†ä¸ºäº†ä»¥ä¸‹å‡ ç±»ï¼š
|ç±»å‹	|æè¿°|
|----|----|
|feat|	æ–°å¢feature|
|fix|	ä¿®å¤bug|
|docs|	ä»…ä»…ä¿®æ”¹äº†æ–‡æ¡£ï¼Œæ¯”å¦‚README, CHANGELOG, CONTRIBUTEç­‰ç­‰;|
|style|	ä»…ä»…ä¿®æ”¹äº†ç©ºæ ¼ã€æ ¼å¼ç¼©è¿›ã€é€—å·ç­‰ç­‰ï¼Œä¸æ”¹å˜ä»£ç é€»è¾‘;|
|refactor|	ä»£ç é‡æ„ï¼Œæ²¡æœ‰åŠ æ–°åŠŸèƒ½æˆ–è€…ä¿®å¤bug|
|perf|	ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ|
|test|	æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰|
|chore|	æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰|
|revert|	å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬|

è´´å¿ƒçš„æ˜¯ï¼Œcommitlintä¹Ÿå¯ä»¥è‡ªå®šä¹‰è§„åˆ™ã€‚
### prettier
ä¸Šé¢çš„commitlintæ˜¯å¤§å“¥è®¾ç½®çš„ä»£ç æäº¤çš„æœ€åä¸€é“å…³å¡ï¼Œä¹Ÿæ˜¯æœ€ç®€å•ï¼Œå®¹æ˜“ç†è§£çš„å…³å¡ã€‚è®²é“ç†ï¼Œeslintä¹Ÿå¯ä»¥åšåˆ°æ ¼å¼åŒ–ï¼Œ*å¤§å“¥æ›¾ç»å› ä¸ºè¿™ä¸ªé—®é¢˜å’Œleaderè®¨è®ºè¿‡ï¼Œæœ€ç»ˆä¹Ÿæ²¡æœ‰å¾—å‡ºæ¥ä¸ªå•¥ç»“è®ºã€‚å¤§å“¥è¯´æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹eslintä¼šå¤±æ•ˆï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨prettierï¼Œä½†æ˜¯leaderæ˜¯ä¸ç½®å¯å¦ã€‚*

å…³äºeslintå’Œprettierçš„å…³ç³»ï¼Œeslintç»™è‡ªå·±çš„sloganæ˜¯ï¼š
> Find and fix problems in your JavaScript code

ä¸»è¦çªå‡ºä¸€ä¸ª**ä¿®å¤é—®é¢˜**ã€‚

è€Œprettierç»™è‡ªå·±çš„è¯´æ˜æ˜¯ï¼š
> An opinionated code formatter

æ›´ä¾§é‡äº**ä»£ç æ ¼å¼**ã€‚

prettieræœ‰ideå†…çš„æ’ä»¶ï¼Œä¹Ÿæ”¯æŒcliè°ƒç”¨ï¼Œè¿˜æœ‰ä¸ª`.prettierrc`çš„é…ç½®é¡¹é¡¹æ–‡ä»¶ï¼Œä½†æ˜¯å®˜æ–¹è‡ªå·±ä¹Ÿè¯´äº†ï¼Œ`Has few options`ã€‚

ä½†å…¶å®ä¸Šé¢çš„éƒ½ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯å¤§å“¥é€šè¿‡githookæ³¨å…¥äº†prettierè®©æˆ‘çš„ä»£ç commitä¸èƒ½äº†ï¼é‚£ä¹ˆå¦‚ä½•åœ¨commitå‰è‡ªåŠ¨è¿›è¡Œprettieræ£€æŸ¥å‘¢ï¼Ÿ

ä»å¤§å“¥çš„å®‰è£…ä¾èµ–ä¸­å¯ä»¥å‘ç°ï¼Œå®‰è£…äº†`lint-staged`è¿™ä¸ªåŒ…ï¼Œè€Œè¿™ä¸ªä¸œè¥¿ï¼Œæ­£æ˜¯åœ¨è¿›è¡Œcommitæ—¶é¦–æ¬¡è¿è¡Œçš„æ£€æŸ¥ï¼ˆè¿™æ ·çœ‹æ¥ï¼Œcommit-msgçš„è¿è¡Œæ—¶é—´æ™šäºpre-commitï¼‰ï¼Œå†ç»†çœ‹ä¸€ä¸‹å¯ä»¥å‘ç°ï¼š
```bash
$ git commit

âœ” Preparing lint-staged...
â¯ Running tasks for staged files...
  â¯ packages/frontend/.lintstagedrc.json â€” 1 file
    â†“ *.js â€” no files [SKIPPED]
    â¯ *.{json,md} â€” 1 file
      â ¹ prettier --write
  â†“ packages/backend/.lintstagedrc.json â€” 2 files
    â¯ *.js â€” 2 files
      â ¼ eslint --fix
    â†“ *.{json,md} â€” no files [SKIPPED]
â—¼ Applying modifications from tasks...
â—¼ Cleaning up temporary files...
```
å®ƒè¯»å–äº†ä¸€ä¸ª`.lintstagedrc`çš„æ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§è®¾ç½®çš„è§„åˆ™è¿›è¡Œæ ¼å¼åŒ–ï¼Œæ¯”å¦‚å¤§å“¥çš„é…ç½®ä¸ºï¼š
```json
{
  "*.{js,jsx,ts,tsx}": "eslint", // ä¹Ÿå¯ä»¥å†™æ•°ç»„è¿›è¡Œå¤šæ­¥å¤„ç†
  "*.{scss,less}": "stylelint"
}
```
å—¯ï¼Œçœ‹åˆ°è¿™é‡Œå°±éœ€è¦çº æ­£è‡ªå·±ï¼Œå¤§å“¥æ ¹æœ¬æ²¡æœ‰ç”¨ä¸Šprettierå•Šï¼Œåªç”¨äº†`eslint`å’Œ`stylelint`è¿›è¡Œæ£€æŸ¥ã€‚æ­¤å¤–ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥å†™`eslint --fix`å‘¢ï¼Ÿæˆ‘çŒœæƒ³æ˜¯å› ä¸ºfixä¼šè¿›è¡Œä¸€äº›ä¸ç¬¦åˆé¢„æœŸçš„æ”¹åŠ¨ï¼Œæ‰€ä»¥å¤§å“¥æ²¡æŠŠåç¼€åŠ ä¸Šå§ã€‚